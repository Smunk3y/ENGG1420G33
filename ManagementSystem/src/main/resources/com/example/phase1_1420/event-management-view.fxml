<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="10" style="-fx-background-color: #f4f4f4;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.phase1_1420.EventManagementController">
    <padding>
        <Insets bottom="20" left="20" right="20" top="20" />
    </padding>

    <!-- List View (Default View) -->
    <VBox fx:id="listView" spacing="10">
        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Event List">
            <padding>
               <Insets left="35.0" />
            </padding></Label>
            <Button fx:id="calendarButton" onAction="#handleViewCalendar" text="View Calendar" />
        </HBox>

        <!-- Filter Controls -->
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label text="Filter by:" />
            <ComboBox fx:id="eventTypeFilter" prefWidth="150" promptText="Event Type" />
            <ComboBox fx:id="dateFilter" prefWidth="150" promptText="Date Range" />
            <Button fx:id="applyFilterButton" onAction="#applyFilters" text="Apply Filters" />
            <Button fx:id="clearFilterButton" onAction="#clearFilters" text="Clear Filters" />
        </HBox>

        <!-- Events Table -->
        <TableView fx:id="eventsTable" prefHeight="300">
            <columns>
                <TableColumn fx:id="eventNameColumn" prefWidth="150" text="Event Name" />
                <TableColumn fx:id="eventDateColumn" prefWidth="100" text="Date" />
                <TableColumn fx:id="eventTimeColumn" prefWidth="100" text="Time" />
                <TableColumn fx:id="eventLocationColumn" prefWidth="150" text="Location" />
                <TableColumn fx:id="eventTypeColumn" prefWidth="100" text="Type" />
                <TableColumn fx:id="eventCapacityColumn" prefWidth="80" text="Capacity" />
            </columns>
        </TableView>

        <HBox alignment="CENTER_RIGHT" spacing="10">
            <Button fx:id="viewEventDetailsButton" onAction="#handleViewEventDetails" text="View Event Details" />
        </HBox>
    </VBox>

    <!-- Calendar View -->
    <VBox fx:id="calendarView" managed="false" spacing="10" visible="false">
        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Event Calendar" />
            <Button fx:id="backToListButton" onAction="#handleBackToList" text="Back to List" />
        </HBox>

        <!-- Calendar Grid -->
        <GridPane fx:id="calendarGrid" hgap="5" style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1;" vgap="5">
            <padding>
                <Insets bottom="10" left="10" right="10" top="10" />
            </padding>
            
            <!-- Day headers -->
            <Label style="-fx-font-weight: bold;" text="Sun" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <Label style="-fx-font-weight: bold;" text="Mon" GridPane.columnIndex="1" GridPane.rowIndex="0" />
            <Label style="-fx-font-weight: bold;" text="Tue" GridPane.columnIndex="2" GridPane.rowIndex="0" />
            <Label style="-fx-font-weight: bold;" text="Wed" GridPane.columnIndex="3" GridPane.rowIndex="0" />
            <Label style="-fx-font-weight: bold;" text="Thu" GridPane.columnIndex="4" GridPane.rowIndex="0" />
            <Label style="-fx-font-weight: bold;" text="Fri" GridPane.columnIndex="5" GridPane.rowIndex="0" />
            <Label style="-fx-font-weight: bold;" text="Sat" GridPane.columnIndex="6" GridPane.rowIndex="0" />
         <columnConstraints>
            <ColumnConstraints />
            <ColumnConstraints />
            <ColumnConstraints />
            <ColumnConstraints />
            <ColumnConstraints />
            <ColumnConstraints />
            <ColumnConstraints />
         </columnConstraints>
         <rowConstraints>
            <RowConstraints />
         </rowConstraints>
            
            <!-- Calendar cells will be populated by controller -->
        </GridPane>

        <!-- Month Navigation -->
        <HBox alignment="CENTER" spacing="10">
            <Button fx:id="prevMonthButton" onAction="#handlePrevMonth" text="&lt;" />
            <Label fx:id="monthYearLabel" style="-fx-font-size: 16px; -fx-font-weight: bold;" />
            <Button fx:id="nextMonthButton" onAction="#handleNextMonth" text="&gt;" />
        </HBox>
    </VBox>

    <!-- Event Details View -->
    <VBox fx:id="eventDetailsView" managed="false" spacing="10" visible="false">
        <!-- Header -->
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Event Details" />
            <Button fx:id="backButton" onAction="#handleBackToList" text="Back to List" />
        </HBox>

        <!-- Event Details -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1;">
            <padding>
                <Insets bottom="15" left="15" right="15" top="15" />
            </padding>
            
            <GridPane hgap="10" vgap="10">
                <Label style="-fx-font-weight: bold;" text="Event Name:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                <Label fx:id="selectedEventNameText" GridPane.columnIndex="1" GridPane.rowIndex="0" />
                
                <Label style="-fx-font-weight: bold;" text="Date &amp; Time:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                <Label fx:id="selectedEventDateTimeText" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                
                <Label style="-fx-font-weight: bold;" text="Location:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                <Label fx:id="selectedEventLocationText" GridPane.columnIndex="1" GridPane.rowIndex="2" />
                
                <Label style="-fx-font-weight: bold;" text="Description:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
                <Label fx:id="selectedEventDescriptionText" wrapText="true" GridPane.columnIndex="1" GridPane.rowIndex="3" />
                
                <Label style="-fx-font-weight: bold;" text="Type:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
                <Label fx:id="selectedEventTypeText" GridPane.columnIndex="1" GridPane.rowIndex="4" />
                
                <Label style="-fx-font-weight: bold;" text="Capacity:" GridPane.columnIndex="0" GridPane.rowIndex="5" />
                <Label fx:id="selectedEventCapacityText" GridPane.columnIndex="1" GridPane.rowIndex="5" />
                
                <Label style="-fx-font-weight: bold;" text="Cost:" GridPane.columnIndex="0" GridPane.rowIndex="6" />
                <Label fx:id="selectedEventCostText" GridPane.columnIndex="1" GridPane.rowIndex="6" />
            <columnConstraints>
               <ColumnConstraints />
               <ColumnConstraints />
            </columnConstraints>
            <rowConstraints>
               <RowConstraints />
               <RowConstraints />
               <RowConstraints />
               <RowConstraints />
               <RowConstraints />
               <RowConstraints />
               <RowConstraints />
            </rowConstraints>
            </GridPane>
            
            <!-- Registration Controls -->
            <VBox spacing="10" style="-fx-background-color: #f9f9f9; -fx-border-color: #ddd; -fx-border-width: 1;">
                <padding>
                    <Insets bottom="10" left="10" right="10" top="10" />
                </padding>
                
                <Label style="-fx-font-weight: bold;" text="Your Registration Status:" />
                <Label fx:id="registrationStatusText" style="-fx-text-fill: #4CAF50;" />
                
                <HBox alignment="CENTER_RIGHT" spacing="10">
                    <Button fx:id="registerButton" onAction="#registerForEvent" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="Register" />
                    <Button fx:id="cancelRegistrationButton" onAction="#cancelRegistration" style="-fx-background-color: #f44336; -fx-text-fill: white;" text="Cancel Registration" />
                </HBox>
            </VBox>
        </VBox>
    </VBox>
</VBox>
